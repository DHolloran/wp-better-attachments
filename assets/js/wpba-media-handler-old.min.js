$(function(){function r(e){e.fadeOut(function(){var r=$("ul",t).length?$("ul",t):$("<ul class='gallery ui-helper-reset'/>").appendTo(t);e.find("a.ui-icon-trash").remove();e.append(n).appendTo(r).fadeIn(function(){e.animate({width:"48px"}).find("img").animate({height:"36px"})})})}function s(t){t.fadeOut(function(){t.find("a.ui-icon-refresh").remove().end().css("width","96px").append(i).find("img").css("height","72px").end().appendTo(e).fadeIn()})}function o(e){var t=e.attr("href"),n=e.siblings("img").attr("alt"),r=$("img[src$='"+t+"']");if(r.length)r.dialog("open");else{var i=$("<img alt='"+n+"' width='384' height='288' style='display: none; padding: 8px;' />").attr("src",t).appendTo("body");setTimeout(function(){i.dialog({title:n,width:400,modal:!0})},1)}}var e=$("#gallery"),t=$("#trash");$("li",e).draggable({cancel:"a.ui-icon",revert:"invalid",containment:"document",helper:"clone",cursor:"move"});t.droppable({accept:"#gallery > li",activeClass:"ui-state-highlight",drop:function(e,t){r(t.draggable)}});e.droppable({accept:"#trash li",activeClass:"custom-state-active",drop:function(e,t){s(t.draggable)}});var n="<a href='link/to/recycle/script/when/we/have/js/off' title='Recycle this image' class='ui-icon ui-icon-refresh'>Recycle image</a>",i="<a href='link/to/trash/script/when/we/have/js/off' title='Delete this image' class='ui-icon ui-icon-trash'>Delete image</a>";$("ul.gallery > li").click(function(e){var t=$(this),n=$(e.target);n.is("a.ui-icon-trash")?r(t):n.is("a.ui-icon-zoomin")?o(n):n.is("a.ui-icon-refresh")&&s(t);return!1})});