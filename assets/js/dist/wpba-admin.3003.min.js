jQuery(function($){var media={uploader:{fileFrame:void 0}};media.uploader.open=function(elem,callback){if(media.uploader.fileFrame)return void media.uploader.fileFrame.open();var titleText=elem.attr("title"),title="undefined"==typeof titleText?"Add Attachment(s)":titleText,buttonLinkText=elem.find(".wpba-add-link-title").text(),buttonText="undefined"==typeof buttonLinkText?title:buttonLinkText;media.uploader.fileFrame=wp.media({title:title,button:{text:buttonText},multiple:!0}),media.uploader.fileFrame.on("select",function(){var attachments=media.uploader.fileFrame.state().get("selection").toJSON();"undefined"!=typeof callback&&callback($.parseJSON(attachments))}),media.uploader.fileFrame.open()},media.uploader.addAttachmentHandler=function(elem,callback){elem="undefined"==typeof activatorElem?$(".wpba-add-link"):elem,elem.on("click",function(e){return e.preventDefault(),media.uploader.open($(this),callback),!1})},media.uploader.init=function(activatorElem,callback){media.uploader.addAttachmentHandler(activatorElem,callback)},$(window).load(function(){media.uploader.init($(".wpba-add-link"),function(attachments){console.log(attachments)})}),WPBA_ADMIN_JS.media=media}(jQuery)),jQuery(function($){var meta={};meta.initSorting=function(){meta.sortableElem.sortable({placeholder:"ui-state-highlight",items:".wpba-sortable-item",handle:".wpba-sort-handle",cursor:"move",start:function(event,ui){$(".ui-state-highlight").css({height:ui.item.outerHeight(),width:ui.item.outerWidth()})},update:function(){meta.sortableElem.find(".wpba-sortable-item").each(function(index,el){$(el).find(".menu-order-input").val(index+1)})}})},meta.removeAttachmentItem=function(elem){return elem.hasClass("attachment-item")?elem.remove():elem.parentsUntil(".attachment-item").remove(),meta.sortableElem.sortable("refresh"),!1},meta.delete=function(id,callback){var ajaxParams={action:"wpba_delete_attachment",id:id};return $.post(ajaxurl,ajaxParams,function(data,textStatus){var success="success"===textStatus&&$.parseJSON(data)===!0?!0:!1;success&&meta.removeAttachmentItem($("#wpba_attachment_"+id)),"undefined"!=typeof callback&&callback(success)}),!1},meta.deleteHandler=function(elem){return elem="undefined"==typeof elem?$(".wpba-delete-link"):elem,elem.on("click",function(e){e.preventDefault();var makeSure=confirm("Are you sure you want to permanently delete this attachment?");if(!makeSure)return!1;var attachmentId=$(this).attr("id").replace("wpba_delete_","");return meta.delete(attachmentId),!1}),!1},meta.unattach=function(id,callback){var ajaxParams={action:"wpba_unattach_attachment",id:id};return $.post(ajaxurl,ajaxParams,function(data,textStatus){var success="success"===textStatus&&$.parseJSON(data)===!0?!0:!1;success&&meta.removeAttachmentItem($("#wpba_attachment_"+id)),"undefined"!=typeof callback&&callback(success)}),!1},meta.unattachHandler=function(elem){return elem="undefined"==typeof elem?$(".wpba-unattach-link"):elem,elem.on("click",function(e){e.preventDefault();var attachmentId=$(this).attr("id").replace("wpba_unattach_","");return meta.unattach(attachmentId),!1}),!1},meta.eventHandlers=function(elem){return meta.unattachHandler(elem),meta.deleteHandler(elem),meta.sortableElem.sortable("refresh"),!1},meta.init=function(){meta.sortableElem=$("#wpba_sortable"),meta.initSorting(),meta.eventHandlers()},$(document).ready(function(){meta.init()}),WPBA_ADMIN_JS.meta=meta}(jQuery)),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}(),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();
//# sourceMappingURL=wpba-admin.min.map